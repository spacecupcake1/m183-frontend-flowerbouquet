<div class="main-container">
  <header class="main-header">
    <h1>üåπ Flower Bouquet Shop</h1>

    <!-- User info and logout -->
    <div *ngIf="isAuthenticated()" class="user-info">
      <span>Welcome, {{getUserDisplayName()}}</span>
      <button (click)="logout()" class="btn btn-outline">Logout</button>
    </div>

    <!-- Login prompt for non-authenticated users -->
    <div *ngIf="!isAuthenticated()" class="login-prompt">
      <a [routerLink]="['/login']" class="btn btn-primary">Login</a>
      <a [routerLink]="['/register']" class="btn btn-secondary">Register</a>
    </div>
  </header>

  <!-- Error display -->
  <div *ngIf="error" class="alert alert-error">
    {{error}}
    <button (click)="error = null" class="close-btn">&times;</button>
  </div>

  <!-- Quick actions for authenticated users -->
  <div *ngIf="isAuthenticated()" class="quick-actions">
    <h2>What would you like to do?</h2>

    <div class="action-grid">
      <!-- User actions -->
      <button *appRoleBasedDisplay="['ROLE_USER', 'ROLE_ADMIN']"
              (click)="viewFlowers()"
              class="action-card">
        <i class="icon">üå∏</i>
        <h3>Browse Flowers</h3>
        <p>Explore our beautiful flower collection</p>
      </button>

      <!-- Admin actions -->
      <button *appRoleBasedDisplay="'ROLE_ADMIN'"
              (click)="openAdminPanel()"
              class="action-card admin-card">
        <i class="icon">‚öôÔ∏è</i>
        <h3>Admin Panel</h3>
        <p>Manage the flower shop</p>
      </button>

      <button *appRoleBasedDisplayAction="'create-flower'"
              (click)="createFlower()"
              class="action-card admin-card">
        <i class="icon">‚ûï</i>
        <h3>Add New Flower</h3>
        <p>Create a new flower listing</p>
      </button>

      <button *appRoleBasedDisplayAction="'edit-flower'"
              (click)="manageFlowers()"
              class="action-card admin-card">
        <i class="icon">‚úèÔ∏è</i>
        <h3>Manage Flowers</h3>
        <p>Edit and organize flowers</p>
      </button>
    </div>
  </div>

  <!-- Featured flowers for authenticated users -->
  <div *ngIf="isAuthenticated() && permissionService.canView('flower-catalog')" class="featured-flowers">
    <h2>Featured Flowers</h2>

    <div *ngIf="isLoading" class="loading">
      <p>Loading flowers...</p>
    </div>

    <div *ngIf="!isLoading && flowers.length > 0" class="flower-grid">
      <div *ngFor="let flower of flowers.slice(0, 6)" class="flower-card">
        <img [src]="flower.imageUrl" [alt]="flower.name" class="flower-image">
        <h3>{{flower.name}}</h3>
        <p class="flower-meaning">{{flower.meaning}}</p>
        <p class="flower-price">CHF {{flower.price}}</p>
        <span class="availability" [class.available]="flower.availablity === 'Available'">
          {{flower.availablity}}
        </span>
      </div>
    </div>
  </div>

  <!-- Public information for non-authenticated users -->
  <div *ngIf="!isAuthenticated()" class="public-info">
    <h2>Welcome to Flower Bouquet Shop</h2>
    <p>Discover beautiful flowers and create memorable bouquets.</p>
    <p>Please <a [routerLink]="['/login']">log in</a> or <a [routerLink]="['/register']">register</a> to browse our collection.</p>
  </div>
</div>
